{% trans_default_domain "sale" %}

{% spaceless %}
{
    "draw": "{{ app.request.query.all.draw }}",
    "recordsTotal": {{ total_count }},
    "recordsFiltered": {{ filtered_count }},
    "data" : [
        {% for sale in sales %}
            {
                "DT_RowId": "{{ 'sale_' ~ sale.id }}",
                "DT_RowClass": "{{ 'sale' }}",
                "id": "{{ sale.id }}",
                "date": "{{ sale.cart.date|datetime('dd.MM.yy', 'HH:mm', time_zone, app.request.locale) }}",
                "order": {
                    "id": "{{ sale.orderId }}"
                },
                "store": {
                    "name": "{{ sale.order.store.name }}",
                    "id": "{{ sale.order.store.id }}"
                },
                "customer": {
                    "id": "{{ sale.order.customerId }}",
                    "name": "{{ sale.order.customer.name }}"
                },
                "sale": {
                    "name": "{{ sale.name }}",
                    "quantity": "{{ sale.quantity|integer(app.request.locale) }}",
                    "amount": {
                        "exl": "{{ sale.getAmountExcl|currency(sale.currencyId, app.request.locale) }}",
                        "tax": "{{ sale.getTaxAmount|currency(sale.currencyId, app.request.locale)}}",
                        "incl": "{{ sale.getAmountIncl|currency(sale.currencyId, app.request.locale)}}"
                    }
                }
            }{% if not loop.last %},{% endif %}
        {% endfor %}
    ]
}
{% endspaceless %}
