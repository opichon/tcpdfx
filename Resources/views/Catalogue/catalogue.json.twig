{% spaceless %}
{
    "data": [
        {
            "label": "{{ catalogue.name }}",
            "id": "{{ catalogue.id }}",
            "link": "{{ path('category', {id: catalogue.id }) }}"
            {{ _self.category(catalogue) }}
        }
    ]

    {% macro category(catalogue) %}
        {% if (catalogue.hasChildren) %}
        ,
        "children": [
            {% for child in catalogue.getChildren %}
            {
                "label": "{{ child.name }}",
                "id": "{{ child.id }}",
                "link": "{{ path('category', {id: child.id }) }}"
                {{ _self.category(child) }}
            }{% if not loop.last %},{% endif %}
            {% endfor %}
        ]
        {% endif %}
    {% endmacro %}
}
{% endspaceless %}
