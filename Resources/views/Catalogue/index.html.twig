{% extends template %}

{% trans_default_domain "catalogue" %}

{% block page_title %}{% trans with { '%store%': store.name } %}catalogue.page_title{% endtrans %}{% endblock %}

{% block page_class %}catalogue{% endblock %}

{% block content %}
<div class="_catalogue">
    <div class="jqtree">

    </div>
</div>
{% endblock %}

{% block head_style %}
	{{ parent() }}
	{% stylesheets filter="cssrewrite" output="css/*.css"
        'bundles/dzangocartcore/js/vendor/jqTree/jqtree.css'
        'bundles/dzangocartcore/css/catalogue/catalogue.css'
	%}
		<link href="{{ asset_url }}" type="text/css" rel="stylesheet" media="screen" />
	{% endstylesheets %}
{% endblock head_style %}

{% block foot_script %}
	{{ parent() }}
	{% javascripts
		'bundles/dzangocartcore/js/vendor/jqTree/tree.jquery.js'
		'bundles/dzangocartcore/js/scripts/catalogue/catalogue.js'
	%}
		<script src="{{ asset_url }}"></script>
	{% endjavascripts %}
	<script>
	dzangocart.catalogue = {
        url: "{{ path('store_catalogue', { id: store.id, _format: 'json' }) }}",
        
        add_edit_link: function( node, $li ) {
            $li.find('.jqtree-element').append(
            '<a  href="catalogue/category/'+ node.id +'" class="edit" data-node-id="'+
            node.id +'"><i class="fa fa-pencil-square-o"></i></a>'
            );
        }
	}
	</script>
{% endblock %}
