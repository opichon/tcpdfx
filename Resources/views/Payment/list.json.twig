{% trans_default_domain "payment" %}

{% spaceless %}
{
	"draw": "{{ draw }}",
	"recordsTotal": {{ count_total }},
	"recordsFiltered": {{ count_filtered }},
	"data" : [
		{% for payment in payments %}
			{
                "DT_RowId":      "{{ 'p_' ~ payment.id }}",
                "DT_RowClass":   "{{ 'payment' }}",
                "check":         "",
                "date":          "{{ payment.createdAt|datetime('dd.MM.yy', 'HH:mm', time_zone, app.request.locale) }}",
				"store":         {
                    "id":        {{ payment.gateway.store.id }},
                    "name":      "{{ payment.gateway.store.name }}"
                },
	            "order":         {
				    "id":        "{{ payment.order.id }}"
				},
				"gateway":       {
					"name":      "{{ payment.gateway.name }}"
				},
                "amount":        "{{ payment.amount|currency(payment.currency.id, app.request.locale) }}",
				"status":        "{% include 'DzangocartCoreBundle:Payment:status.html.twig' %}",
                "actions":       "{% include 'DzangocartCoreBundle:Payment:actions.html.twig' %}",
				"urls": {
                    "show": "{% include 'DzangocartCoreBundle:Payment:order.html.twig' with { order: payment.order }%}",
                    "store": "{{ path('store', { id: payment.gateway.store.id }) }}"
                }
			}{% if not loop.last %},{% endif %}
		{% endfor %}
	]
}
{% endspaceless %}
