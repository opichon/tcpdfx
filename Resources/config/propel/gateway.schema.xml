<?xml version="1.0" encoding="utf-8"?>
<database name="default" namespace="Dzangocart\Bundle\CoreBundle\Model" defaultIdMethod="native">
    <table name="gateway" idMethod="native">
        <column name="id"                    type="integer" primaryKey="true" autoIncrement="true" required="true" />
        <column name="store_id"              type="integer" required="true"/>
        <column name="provider_id"           type="integer" phpName="ServiceId" required="true" />
        <column name="settings_id"           type="integer" required="false" />
        <column name="status"                type="tinyint" required="true" defaultValue="0" />
        <column name="testing"               type="boolean" size="1" required="true" defaultValue="false" />
        <column name="restriction"           type="boolean" size="1" required="true" defaultValue="false" />
        <column name="created_at"            type="timestamp" required="true" />
        <column name="updated_at"            type="timestamp" required="true" />
        <column name="deleted_at"            type="timestamp" required="false" />
        <column name="msg_payment_methods"   type="longvarchar" required="false" />
        <column name="msg_payment_ok"        type="longvarchar" required="false" />
        <column name="msg_payment_cancelled" type="longvarchar" required="false" />
        <column name="msg_payment_error"     type="longvarchar" required="false" />
        <behavior name="timestampable" />
        <behavior name="soft_delete" />
        <foreign-key foreignTable="store" name="FI_gateway_store" onDelete="cascade" onUpdate="restrict">
            <reference local="store_id" foreign="id" />
        </foreign-key>
        <foreign-key foreignTable="gateway_service" name="FI_gateway_gateway_service" phpName="Service">
            <reference local="provider_id" foreign="id" />
        </foreign-key>
        <unique name="store_id">
            <unique-column name="store_id" />
            <unique-column name="provider_id" />
            <unique-column name="testing" />
        </unique>
        <index name="provider_id">
            <index-column name="provider_id" />
        </index>
        <behavior name="i18n">
            <parameter name="i18n_columns" value="msg_payment_methods, msg_payment_ok, msg_payment_cancelled, msg_payment_error" />
            <parameter name="locale_column" value="culture" />
        </behavior>
    </table>
    <table name="gateway_engine" idMethod="native">
        <column name="id"                    type="integer" primaryKey="true" autoIncrement="true" required="true" />
        <column name="name"                  type="varchar" size="100" required="true" />
        <column name="msg_payment_methods"   type="longvarchar" required="false" />
        <column name="msg_payment_ok"        type="longvarchar" required="false" />
        <column name="msg_payment_cancelled" type="longvarchar" required="false" />
        <column name="msg_payment_error"     type="longvarchar" required="false" />
        <behavior name="i18n">
            <parameter name="i18n_columns" value="msg_payment_methods, msg_payment_ok, msg_payment_cancelled, msg_payment_error" />
            <parameter name="locale_column" value="culture" />
        </behavior>
    </table>
    <table name="gateway_service" idMethod="native">
        <column name="id"        type="integer" primaryKey="true" autoIncrement="true" required="true" />
        <column name="name"      type="varchar" size="32" required="true" />
        <column name="country"   type="varchar" size="2" required="false" />
        <column name="engine_id" type="integer" size="4" required="true" />
        <column name="bank"      type="varchar" size="128" required="false" />
        <column name="url"       type="longvarchar" required="false" />
        <column name="code"      type="varchar" size="12" required="true" />
        <column name="supported" type="boolean" size="1" required="true" defaultValue="false" />
        <foreign-key foreignTable="gateway_engine" name="FI_gateway_service_gateway_engine" phpName="Engine">
            <reference local="engine_id" foreign="id" />
        </foreign-key>
        <unique name="name">
            <unique-column name="name" />
        </unique>
        <unique name="code">
            <unique-column name="code" />
        </unique>
        <index name="engine_id">
            <index-column name="engine_id" />
        </index>
    </table>
</database>
