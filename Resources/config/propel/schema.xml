<?xml version="1.0" encoding="utf-8"?>
<database name="default" namespace="Dzangocart\Bundle\CoreBundle\Model" defaultIdMethod="native">
    <table name="currency" idMethod="native">
        <column name="id"       type="varchar" size="3" primaryKey="true" required="true" />
        <column name="code"     type="varchar" size="3" required="true" />
        <column name="decimals" type="integer" required="true" defaultValue="2" />
        <column name="symbol"   type="varchar" size="12" required="false" />
        <unique name="code">
            <unique-column name="code" />
        </unique>
    </table>
    <table name="country" idMethod="native">
        <column name="id"          type="varchar" size="2" primaryKey="true" required="true" />
        <column name="name"        type="varchar" size="200" required="true" />
        <column name="eu"          type="boolean" size="1" required="true" defaultValue="false" />
        <column name="currency_id" type="varchar" size="3" required="false" />
        <column name="zone_id"     type="integer" required="false" />
        <foreign-key foreignTable="currency" name="FI_country_currency" onDelete="set null" onUpdate="restrict">
        <reference local="currency_id" foreign="id"/>
        </foreign-key>
        <index name="currency_id">
            <index-column name="currency_id"/>
        </index>
        <index name="zone_id">
            <index-column name="zone_id"/>
        </index>
        <behavior name="i18n">
            <parameter name="i18n_columns" value="name" />
            <parameter name="locale_column" value="culture" />
        </behavior>
    </table>
    <table name="gateway_engine" phpName="GatewayEngine" idMethod="native">
        <column name="id"   type="integer" primaryKey="true" autoIncrement="true" required="true"/>
        <column name="name" type="varchar" size="100" required="true"/>
    </table>
    <table name="store"  idMethod="native">
        <column name="id"                  type="integer" primaryKey="true" autoIncrement="true" required="true" />
        <column name="owner_id"            type="integer" required="true" />
        <column name="name"                type="varchar" size="100" required="false" />
        <column name="type_id"             type="integer" required="false" />
        <column name="rcs"                 type="varchar" size="128" required="false" />
        <column name="siren"               type="varchar" size="9" required="false" />
        <column name="naf"                 type="varchar" size="5" required="false" />
        <column name="vat_id"              type="varchar" size="14" required="false" />
        <column name="address_id"          type="integer" required="false" />
        <column name="bill_reg_address"    type="tinyint" required="false" defaultValue="1" />
        <column name="billing_address_id"  type="integer" required="false" />
        <column name="telephone"           type="varchar" size="20" required="false" />
        <column name="fax"                 type="varchar" size="20" required="false" />
        <column name="email"               type="varchar" size="100" required="false" />
        <column name="domain"              type="varchar" size="32" required="true" />
        <column name="realm"               type="varchar" size="32" required="true" />
        <column name="host"                type="varchar" size="128" required="false" />
        <column name="hostname"            type="varchar" size="132" required="false" />
        <column name="website"             type="varchar" size="128" required="false" />
        <column name="logo"                type="varchar" size="256" required="false" />
        <column name="currency_id"         type="varchar" size="3" required="true" defaultValue="EUR" />
        <column name="tax_included"        type="tinyint" required="true" defaultValue="0" />
        <column name="default_category_id" type="integer" required="false" />
        <column name="loading"             type="varchar" size="50" required="false"/>
        <column name="template_minified"   type="longvarchar" required="false" />
        <column name="key"                 type="varchar" size="40" required="false" />
        <column name="testcode"            type="varchar" size="32" required="false" />
        <column name="active"              type="boolean" size="1" required="true" defaultValue="false" />
        <column name="suspended"           type="boolean" size="1" required="true" defaultValue="false" />
        <column name="status"              type="integer" required="true" defaultValue="0"/>
        <column name="created_at"          type="timestamp" required="true" />
        <column name="updated_at"          type="timestamp" required="true" />
        <column name="deleted_at"          type="timestamp" required="false" />
        <column name="plan_id"             type="integer" required="false" />
        <column name="expires_at"          type="timestamp" required="false" />
        <column name="affiliate_id"        type="integer" required="false" />
        <column name="oauth_token"         type="varchar" size="64" required="false" />
        <column name="year_end"            type="boolean" size="1" required="true" defaultValue="12" />
        <column name="country_id"          type="varchar" size="2" required="true" defaultValue="FR" />
        <unique name="domain">
            <unique-column name="domain" />
        </unique>
        <index name="rcs">
            <index-column name="rcs" />
        </index>
        <index name="owner_id">
            <index-column name="owner_id" />
        </index>
        <index name="type_id">
            <index-column name="type_id" />
        </index>
        <index name="address_id">
            <index-column name="address_id" />
        </index>
        <index name="billing_address_id">
            <index-column name="billing_address_id" />
        </index>
        <index name="currency_id">
            <index-column name="currency_id" />
        </index>
        <index name="default_category_id">
            <index-column name="default_category_id" />
        </index>
        <index name="plan_id">
            <index-column name="plan_id" />
        </index>
        <index name="affiliate_id">
            <index-column name="affiliate_id" />
        </index>
    </table>
    <table name="store_user_settings" phpName="UserSettings" idMethod="native">
        <column name="id"                type="integer" primaryKey="true" autoIncrement="true" required="true" />
        <column name="store_id"          type="integer" required="true" />
        <column name="user_handling"     type="boolean" size="1" required="true" defaultValue="false" />
        <column name="login_url"         type="longvarchar" required="false" />
        <column name="register_url"      type="longvarchar" required="false" />
        <column name="auto_register"     type="tinyint" required="true" defaultValue="0" />
        <column name="auto_register_url" type="longvarchar" required="false" />
        <column name="profile_url"       type="longvarchar" required="false" />
        <column name="password_url"      type="longvarchar" required="false" />
        <column name="email_as_login"    type="boolean" size="1" required="true" defaultValue="true" />
        <column name="open_id"           type="boolean" size="1" required="true" defaultValue="false" />     
        <foreign-key foreignTable="store" name="FI_user_settings_store" onDelete="restrict" onUpdate="restrict">
            <reference local="store_id" foreign="id"/>
        </foreign-key>
        <index name="store_id">
            <index-column name="store_id" />
        </index>
    </table>
    <table name="tax" idMethod="native">
        <column name="id"         type="integer" primaryKey="true" autoIncrement="true" required="true" />
        <column name="country"    type="varchar" size="2" required="true" defaultValue="FR" />
        <column name="name"       type="varchar" size="30" required="true" />
        <column name="rate"       type="float" size="5" scale="2" required="false" />
        <column name="is_default" type="tinyint" required="false" defaultValue="0" />
    </table>
</database>
