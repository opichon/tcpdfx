<?xml version="1.0" encoding="UTF-8"?>
<database name="default" namespace="Dzangocart\Bundle\CoreBundle\Model" defaultIdMethod="native">
    <table name="dzango_user" phpName="User" idMethod="native">
        <column name="id"             type="integer" primaryKey="true" autoIncrement="true" required="true" />
        <column name="realm"          type="varchar" size="32" required="false" />
        <column name="code"           type="varchar" size="100" required="false" />
        <column name="username"       type="varchar" size="128" required="false" />
        <column name="algorithm"      type="varchar" size="128" required="true" defaultValue="sha1" />
        <column name="salt"           type="varchar" size="128" required="false" />
        <column name="password"       type="varchar" size="128" required="false" />
        <column name="created_at"     type="timestamp" required="false" />
        <column name="last_login"     type="timestamp" required="false" />
        <column name="is_active"      type="tinyint" required="true" defaultValue="1" />
        <column name="is_super_admin" type="tinyint" required="true" defaultValue="0" />
        <unique name="user_id">
            <unique-column name="username" />
            <unique-column name="realm" />
            <unique-column name="is_active" />
        </unique>
        <behavior name="typehintable">
            <parameter name="last_login" value="DateTime" />
            <parameter name="nullable_columns" value="last_login" />
        </behavior>
    </table>
    <table name="user_profile" phpName="Profile" idMethod="native">
        <column name="id"          type="integer" primaryKey="true" autoIncrement="true" required="true" />
        <column name="user_id"     type="integer" required="false" />
        <column name="surname"     type="varchar" size="30" required="false" />
        <column name="given_names" type="varchar" size="30" required="false" />
        <column name="salutation"  type="varchar" size="5" required="false" />
        <column name="gender"      type="varchar" size="1" required="false" />
        <column name="company"     type="varchar" size="30" required="false" />
        <column name="email"       type="varchar" size="100" required="false" />
        <column name="telephone"   type="varchar" size="20" required="false" />
        <column name="fax"         type="varchar" size="20" required="false" />
        <column name="mobile"      type="varchar" size="20" required="false" />
        <column name="dob"         type="date" required="false"/>
        <column name="address_id"  type="integer" required="false" />
        <column name="token"       type="varchar" size="32" required="true" />
        <column name="created_at"  type="timestamp" required="false" />
        <column name="updated_at"  type="timestamp" required="false" />
        <column name="deleted_at"  type="timestamp" required="false" />
        <foreign-key foreignTable="dzango_user" name="FI_user_profile_dzango_user" onDelete="cascade" onUpdate="restrict">
            <reference local="user_id" foreign="id" />
        </foreign-key>
        <foreign-key foreignTable="address" name="FI_user_profile_address" onDelete="restrict" onUpdate="restrict">
            <reference local="address_id" foreign="id" />
        </foreign-key>
        <index name="user_id">
            <index-column name="user_id" />
        </index>
        <index name="address_id">
            <index-column name="address_id" />
        </index>
        <behavior name="typehintable">
            <parameter name="dzango_user" value="FOS\UserBundle\Model\UserInterface" />
        </behavior>
    </table>
</database>
