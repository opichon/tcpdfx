<?xml version="1.0" encoding="UTF-8"?>
<database name="default" namespace="Dzangocart\Bundle\CoreBundle\Model\Promotion" defaultIdMethod="native">
    <table name="promotion" idMethod="native">
        <column name="id"           type="integer" primaryKey="true" autoIncrement="true" required="true" />
        <column name="store_id"     type="integer" required="true" />
        <column name="category_id"  type="integer" required="false" />
        <column name="date_from"    type="timestamp" required="false" />
        <column name="name"         type="varchar" size="132" required="true"/>
        <column name="description"  type="longvarchar" required="true"/>
        <column name="date_to"      type="timestamp" required="false" />
        <column name="rule_id"      type="integer" required="true" />
        <column name="rule_param"   type="varchar" size="128" required="false" />
        <column name="action_id"    type="integer" required="true"/>
        <column name="action_param" type="varchar" size="128" required="false" />
        <column name="rank"         type="integer" required="true" defaultValue="0" />
        <column name="code"         type="varchar" size="128" required="false" />
        <foreign-key foreignTable="store" name="FI_promotion_store" onDelete="restrict" onUpdate="restrict">
            <reference local="store_id" foreign="id" />
        </foreign-key>
        <index name="store_id">
            <index-column name="store_id" />
            <index-column name="category_id" />
        </index>
        <index name="category_id">
            <index-column name="category_id" />
        </index>
        <index name="rule_id">
            <index-column name="rule_id" />
        </index>
        <index name="action_id">
            <index-column name="action_id" />
        </index>
        <behavior name="i18n">
            <parameter name="i18n_columns" value="name, description" />
            <parameter name="locale_column" value="culture" />
        </behavior>
    </table>
    <table name="promotion_action" phpName="Action" idMethod="native">
        <column name="id"        type="integer" primaryKey="true" autoIncrement="true" required="true" />
        <column name="classname" type="varchar" size="32" required="true" />
        <column name="name"         type="varchar" size="32" required="true"/>
        <column name="description"  type="longvarchar" required="true"/>
        <behavior name="i18n">
            <parameter name="i18n_columns" value="name, description" />
            <parameter name="locale_column" value="culture" />
        </behavior>
    </table>
    <table name="promotion_rule" phpName="Rule" idMethod="native">
        <column name="id"        type="integer" primaryKey="true" autoIncrement="true" required="true" />
        <column name="classname" type="varchar" size="32" required="true" />
        <column name="name"         type="varchar" size="32" required="true"/>
        <column name="description"  type="longvarchar" required="true"/>
        <behavior name="i18n">
            <parameter name="i18n_columns" value="name, description" />
            <parameter name="locale_column" value="culture" />
        </behavior>
    </table>
</database>
